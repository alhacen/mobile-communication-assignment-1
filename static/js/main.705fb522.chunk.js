(this["webpackJsonpmobile-communication-assignment"]=this["webpackJsonpmobile-communication-assignment"]||[]).push([[0],{16:function(e,n,t){},17:function(e,n,t){},19:function(e,n){function t(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=19},20:function(e,n,t){"use strict";t.r(n);var c=t(1),o=t.n(c),a=t(8),s=t.n(a),i=t(7),r=t.n(i),l=t(9),u=t(3),d=(t(16),t(17),t(2)),m=t(0),b=function(e){var n=e.children,t=e.me,c=void 0===t?0:t;return Object(m.jsx)("div",{className:"flex items-end  ".concat(1===c?" justify-end":0===c?"":"justify-center"),style:{margin:"4px"},children:Object(m.jsx)("div",{className:"flex flex-col space-y-2 text-xs max-w-xs mx-2 order-2 items-start",children:Object(m.jsx)("span",{className:"px-4 py-2 inline-block   ".concat(1===c?"rounded-lg rounded-bl-none bg-blue-600 text-white":0===c?"rounded-lg rounded-bl-none bg-gray-300 text-gray-600":"shadow-md border-2"," "),children:n})})})},f=function(){setTimeout((function(){document.getElementById("messages").scrollTop=document.getElementById("messages").scrollHeight}),50)},w=function(e){var n=e.peerId,t=e.peer,o=function(){window.sound.currentTime=0,window.sound.play()},a=Object(c.useState)([]),s=Object(u.a)(a,2),i=s[0],r=s[1];window.messages=i;var l=Object(c.useState)(""),w=Object(u.a)(l,2),j=w[0],h=w[1];Object(c.useEffect)((function(){var e=window.location.hash.substr(1);window.r=e,t&&36===e.length&&"-"===e[8]&&"-"===e[13]&&"-"===e[18]&&"-"===e[23]&&t.on("open",(function(){var n=t.connect(e);window.p=t,window.conn=n,n.on("open",(function(){window.history.replaceState(null,null," "),r([].concat(Object(d.a)(window.messages),[{type:3,msg:"connected",time:Date.now()}])),n.on("data",(function(e){o(),r([].concat(Object(d.a)(window.messages),[{type:0,msg:e,time:Date.now()}]))}))}))})),null===t||void 0===t||t.on("connection",(function(e){window.conn=e,o(),r([].concat(Object(d.a)(window.messages),[{type:3,msg:"User connected",time:Date.now()}])),e.on("data",(function(e){o(),r([].concat(Object(d.a)(window.messages),[{type:0,msg:e,time:Date.now()}])),f()}))}))}),[t]);var g=function(){if(""!==j){r([].concat(Object(d.a)(i),[{type:1,msg:j,time:Date.now()}]));try{window.conn.send(j)}catch(e){}f(),h("")}};return Object(c.useEffect)((function(){""!==n&&""===window.location.hash&&r([].concat(Object(d.a)(window.messages),[{type:3,msg:"Your Room Id is"},{type:3,msg:Object(m.jsx)("a",{className:"hover:underline",href:"".concat(window.location.href,"#").concat(n),children:"".concat(window.location.href,"#").concat(n)})}]))}),[n,r]),Object(m.jsxs)("div",{className:"flex-1 p:2 sm:p-6 justify-between flex flex-col",style:{height:"calc(var(--vh, 1vh) * 100)"},children:[Object(m.jsx)("div",{id:"messages",className:"flex flex-col space-y-4 p-3 overflow-y-auto scrollbar-thumb-blue scrollbar-thumb-rounded scrollbar-track-blue-lighter scrollbar-w-2 scrolling-touch",children:i.map((function(e){return Object(m.jsx)(b,{me:e.type,children:e.msg},e.time)}))}),Object(m.jsx)("div",{className:"border-t-2 border-gray-200 px-4 pt-4 mb-2 sm:mb-0",children:Object(m.jsx)("form",{onSubmit:function(e){e.preventDefault(),g()},children:Object(m.jsxs)("div",{className:"relative flex",children:[Object(m.jsx)("input",{onChange:function(e){h(e.target.value)},value:j,type:"text",placeholder:"Write Something",className:"w-full focus:outline-none focus:placeholder-gray-400 text-gray-600 placeholder-gray-600 pl-12 bg-gray-200 rounded-full py-3"}),Object(m.jsx)("div",{className:"absolute right-0 items-center inset-y-0 sm:flex",children:Object(m.jsx)("button",{onClick:function(){g()},type:"button",className:"inline-flex items-center justify-center rounded-full h-12 w-12 transition duration-500 ease-in-out text-white bg-blue-500 hover:bg-blue-400 focus:outline-none",children:Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-6 w-6 transform rotate-90",children:Object(m.jsx)("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})})})]})})})]})},j=t(10),h=t.n(j);function g(){var e=Object(c.useState)(null),n=Object(u.a)(e,2),t=n[0],o=n[1],a=Object(c.useState)(""),s=Object(u.a)(a,2),i=s[0],d=s[1];return Object(c.useEffect)((function(){var e=new h.a({config:{iceServers:[{url:"stun:stun.xten.com"},{url:"turn:numb.viagenie.ca",credential:"muazkh",username:"webrtc@live.com"}]}});o(e),window.peer=e,e.on("open",function(){var e=Object(l.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.peerId=n,d(n);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}),[d,o]),Object(m.jsx)("div",{children:Object(m.jsx)(w,{peerId:i,peer:t})})}var p=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,21)).then((function(n){var t=n.getCLS,c=n.getFID,o=n.getFCP,a=n.getLCP,s=n.getTTFB;t(e),c(e),o(e),a(e),s(e)}))};s.a.render(Object(m.jsx)(o.a.StrictMode,{children:Object(m.jsx)(g,{})}),document.getElementById("root")),p()}},[[20,1,2]]]);
//# sourceMappingURL=main.705fb522.chunk.js.map