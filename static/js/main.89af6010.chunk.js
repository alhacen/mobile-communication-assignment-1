(this["webpackJsonpmobile-communication-assignment"]=this["webpackJsonpmobile-communication-assignment"]||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){},19:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=19},20:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n.n(c),s=n(8),r=n.n(s),a=n(7),i=n.n(a),l=n(9),u=n(3),d=(n(16),n(17),n(2)),m=n(0),b=function(e){var t=e.children,n=e.me,c=void 0===n?0:n;return Object(m.jsx)("div",{className:"flex items-end  ".concat(1===c?" justify-end":0===c?"":"justify-center"),style:{margin:"4px"},children:Object(m.jsx)("div",{className:"flex flex-col space-y-2 text-xs max-w-xs mx-2 order-2 items-start",children:Object(m.jsx)("span",{className:"px-4 py-2 inline-block   ".concat(1===c?"rounded-lg rounded-bl-none bg-blue-600 text-white":0===c?"rounded-lg rounded-bl-none bg-gray-300 text-gray-600":"shadow-md border-2"," "),children:t})})})},f=function(){setTimeout((function(){document.getElementById("messages").scrollTop=document.getElementById("messages").scrollHeight}),50)},j=function(e){var t=e.peerId,n=e.peer,o=function(){window.sound.currentTime=0,window.sound.play()},s=Object(c.useState)([]),r=Object(u.a)(s,2),a=r[0],i=r[1];window.messages=a,console.log(a);var l=Object(c.useState)(""),j=Object(u.a)(l,2),g=j[0],p=j[1];Object(c.useEffect)((function(){null===n||void 0===n||n.on("connection",(function(e){window.conn=e,o(),i([].concat(Object(d.a)(window.messages),[{type:3,msg:"Chat connected"}])),e.on("data",(function(e){o(),i([].concat(Object(d.a)(window.messages),[{type:0,msg:e}])),f()}))}))}),[n]);var h=function(){if(i([].concat(Object(d.a)(a),[{type:1,msg:g}])),36===g.length&&"-"===g[8]&&"-"===g[13]&&"-"===g[18]&&"-"===g[23]){var e=n.connect(g);window.conn=e,e.on("open",(function(){i([].concat(Object(d.a)(window.messages),[{type:3,msg:"connected"}])),e.on("data",(function(e){o(),i([].concat(Object(d.a)(window.messages),[{type:0,msg:e}]))}))}))}else try{window.conn.send(g)}catch(t){}f(),p("")};return Object(c.useEffect)((function(){""!==t&&i([].concat(Object(d.a)(a),[{type:3,msg:"Your Id is"},{type:3,msg:t}]))}),[t,i]),Object(m.jsxs)("div",{className:"flex-1 p:2 sm:p-6 justify-between flex flex-col",style:{height:"calc(var(--vh, 1vh) * 100)"},children:[Object(m.jsx)("div",{id:"messages",className:"flex flex-col space-y-4 p-3 overflow-y-auto scrollbar-thumb-blue scrollbar-thumb-rounded scrollbar-track-blue-lighter scrollbar-w-2 scrolling-touch",children:a.map((function(e){return Object(m.jsx)(b,{me:e.type,children:e.msg},e.msg)}))}),Object(m.jsx)("div",{className:"border-t-2 border-gray-200 px-4 pt-4 mb-2 sm:mb-0",children:Object(m.jsx)("form",{onSubmit:function(e){e.preventDefault(),h()},children:Object(m.jsxs)("div",{className:"relative flex",children:[Object(m.jsx)("input",{onChange:function(e){p(e.target.value)},value:g,type:"text",placeholder:"Write Something",className:"w-full focus:outline-none focus:placeholder-gray-400 text-gray-600 placeholder-gray-600 pl-12 bg-gray-200 rounded-full py-3"}),Object(m.jsx)("div",{className:"absolute right-0 items-center inset-y-0 sm:flex",children:Object(m.jsx)("button",{onClick:function(){h()},type:"button",className:"inline-flex items-center justify-center rounded-full h-12 w-12 transition duration-500 ease-in-out text-white bg-blue-500 hover:bg-blue-400 focus:outline-none",children:Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-6 w-6 transform rotate-90",children:Object(m.jsx)("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})})})]})})})]})},g=n(10),p=n.n(g);function h(){var e=Object(c.useState)(null),t=Object(u.a)(e,2),n=t[0],o=t[1],s=Object(c.useState)(""),r=Object(u.a)(s,2),a=r[0],d=r[1];return Object(c.useEffect)((function(){var e=new p.a({config:{iceServers:[{url:"stun:stun.xten.com"},{url:"turn:numb.viagenie.ca",credential:"muazkh",username:"webrtc@live.com"}]}});o(e),window.peer=e,e.on("open",function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.peerId=t,d(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[d,o]),Object(m.jsx)("div",{children:Object(m.jsx)(j,{peerId:a,peer:n})})}var w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),o(e),s(e),r(e)}))};r.a.render(Object(m.jsx)(o.a.StrictMode,{children:Object(m.jsx)(h,{})}),document.getElementById("root")),w()}},[[20,1,2]]]);
//# sourceMappingURL=main.89af6010.chunk.js.map